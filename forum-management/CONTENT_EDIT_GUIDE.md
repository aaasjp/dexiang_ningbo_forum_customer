# 内容管理编辑功能使用指南

## 快速开始

### 1. 编辑内容的部门和话题

#### 步骤1: 打开编辑弹框
在内容管理页面的表格中，找到需要编辑的内容行，点击"编辑"按钮。

#### 步骤2: 选择部门
1. 在编辑弹框中，点击"选择部门"按钮
2. 在弹出的部门选择器中：
   - 可以看到树形结构的部门列表
   - 勾选需要关联的部门（支持多选）
   - 可以使用搜索框快速查找部门
3. 点击"确定"完成部门选择
4. 选中的部门会以标签形式显示，可以点击 × 删除

#### 步骤3: 选择话题
1. 在编辑弹框中，点击"选择话题"按钮
2. 在弹出的话题选择器中：
   - 可以看到所有可用话题列表
   - 点击话题进行选择（最多3个）
   - 已选择的话题会高亮显示
   - 可以使用搜索框快速查找话题
3. 点击"确定"完成话题选择
4. 选中的话题会以标签形式显示，可以点击 × 删除

#### 步骤4: 提交修改
1. 确认部门和话题都已选择（至少各选一个）
2. 点击"确定"按钮提交修改
3. 系统会显示"编辑成功"提示
4. 列表自动刷新显示最新数据

### 2. 标记/取消精选

#### 操作方法
1. 在内容管理页面的表格中，找到"精选"列
2. 直接点击状态文字：
   - 点击"取消精选"（灰色）→ 变为"标记精选"（橙色）
   - 点击"标记精选"（橙色）→ 变为"取消精选"（灰色）
3. 系统自动更新并刷新列表

#### 状态说明
- **标记精选**（橙色）: 该内容已被标记为精选内容
- **取消精选**（灰色）: 该内容未被标记为精选

### 3. 删除内容

#### 操作方法
1. 在内容管理页面的表格中，找到需要删除的内容行
2. 点击"删除"按钮
3. 在弹出的确认框中：
   - 点击"确定"：删除该内容
   - 点击"取消"：取消删除操作
4. 删除成功后系统显示提示并刷新列表

#### 注意事项
⚠️ 删除操作不可恢复，请谨慎操作！

## 功能特点

### ✨ 部门选择器特点
- 🌲 树形结构展示，层级清晰
- ☑️ 支持多选，可同时选择多个部门
- 🔍 支持搜索，快速定位目标部门
- 🏷️ 标签展示，选中结果一目了然

### ✨ 话题选择器特点
- 📋 列表展示，简洁明了
- 3️⃣ 最多选择3个话题
- 🔍 支持搜索，快速查找话题
- 💬 显示讨论数，了解话题热度
- 🏷️ 标签展示，选中结果清晰可见

### ✨ 精选功能特点
- 🎯 一键切换，操作便捷
- 🎨 状态区分，视觉清晰
- ⚡ 实时更新，即时生效

### ✨ 删除功能特点
- 🛡️ 二次确认，防止误删
- ⚡ 即时生效，自动刷新

## 常见问题

### Q1: 为什么编辑时必须选择部门和话题？
A: 系统要求每个内容至少关联一个部门和一个话题，以便更好地分类和管理内容。

### Q2: 为什么话题最多只能选3个？
A: 为了保持内容的聚焦性，避免话题过于分散，系统限制每个内容最多关联3个话题。

### Q3: 删除的内容可以恢复吗？
A: 不可以。删除操作是永久性的，删除前请确认是否真的需要删除该内容。

### Q4: 编辑后原来的数据会怎样？
A: 编辑操作会更新内容关联的部门和话题，原来的关联关系会被新的替换。

### Q5: 精选状态会影响什么？
A: 精选状态用于标记优质内容，可能会在前端展示时给予特殊展示或排序优先级。

## 技术说明

### 数据流程

#### 编辑流程
```
用户点击编辑 
  → 加载当前数据到弹框 
  → 用户选择部门和话题 
  → 提交数据 
  → 调用 transferQuestion API 
  → 更新成功 
  → 刷新列表
```

#### 精选流程
```
用户点击精选状态 
  → 判断当前状态 
  → 切换状态值 
  → 调用 markFeatured API 
  → 更新成功 
  → 刷新列表
```

#### 删除流程
```
用户点击删除 
  → 显示确认弹框 
  → 用户确认 
  → 调用 deleteQuestion API 
  → 删除成功 
  → 刷新列表
```

## 相关文件

### 主要组件
- `src/views/Content.vue` - 内容管理主页面
- `src/components/ContentFormDialog.vue` - 编辑弹框组件
- `src/components/DeleteConfirmDialog.vue` - 删除确认弹框

### API 接口
- `src/api/content.js` - 内容相关API
- `src/api/department.js` - 部门相关API
- `src/api/topics.js` - 话题相关API

### 文档
- `CONTENT_MANAGEMENT_FEATURES.md` - 功能详细说明
- `docs/API_DOCUMENTATION.md` - API接口文档

