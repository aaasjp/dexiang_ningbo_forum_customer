# 输入框黑色蒙层功能说明

## 📋 功能概述

为所有输入框场景添加了黑色半透明蒙层（透明度 70%），提升用户体验和视觉层次感。

## 🎯 涉及的输入框场景

### 1. 回答问题输入框
**文件**: `src/components/post/ReplyInput.vue`

**使用场景**：
- 发布新回答
- 回复其他用户的评论
- 编辑已发布的回答

**实现功能**：
- ✅ 点击输入框时显示黑色蒙层
- ✅ 蒙层透明度为 70%（rgba(0, 0, 0, 0.7)）
- ✅ 点击蒙层可关闭输入框
- ✅ 输入框从底部滑入动画
- ✅ 发送成功后自动隐藏
- ✅ 点击取消按钮隐藏

### 2. 修改一句话/岗位输入框
**文件**: `src/components/common/BottomEditInput.vue`

**使用场景**：
- 修改一句话介绍自己
- 修改岗位信息
- 其他单行文本编辑

**实现功能**：
- ✅ 蒙层透明度从 30% 调整为 70%
- ✅ 点击蒙层可关闭输入框
- ✅ 输入框从底部滑入动画
- ✅ 确认后自动隐藏
- ✅ 取消后自动隐藏

## 🎨 视觉效果

### 蒙层样式
```css
.overlay {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.7);  /* 黑色 70% 透明度 */
  z-index: 0;
  animation: fadeIn 0.3s ease-out;
}
```

### 动画效果
- **蒙层淡入**：300ms 渐显动画
- **输入框滑入**：300ms 从底部滑入

## 📝 技术实现细节

### ReplyInput.vue 主要修改

1. **添加状态管理**
```typescript
const isVisible = ref(false)  // 控制整个输入框的显示/隐藏
```

2. **修改模板结构**
```vue
<div v-if="isVisible" class="reply-input-wrapper">
  <div class="overlay" @click="handleOverlayClick"></div>
  <div class="input-container">
    <!-- 输入框内容 -->
  </div>
</div>
```

3. **添加蒙层点击处理**
```typescript
const handleOverlayClick = () => {
  emit('cancel-reply')
  isVisible.value = false
  inputValue.value = ''
  uploadedImages.value = []
}
```

4. **更新 focus 和 setEditContent 方法**
- 显示输入框时自动设置 `isVisible = true`
- 发送成功后设置 `isVisible = false`

### BottomEditInput.vue 主要修改

1. **调整蒙层透明度**
- 从 `rgba(0, 0, 0, 0.3)` 调整为 `rgba(0, 0, 0, 0.7)`
- 保持原有的点击关闭功能

## 🎯 用户体验优化

### 交互逻辑
1. **显示输入框**
   - 用户点击输入框或回复按钮
   - 黑色蒙层渐显（300ms）
   - 输入框从底部滑入（300ms）
   - 输入框自动获得焦点

2. **关闭输入框**
   - 点击黑色蒙层
   - 点击取消/关闭按钮
   - 发送成功后自动关闭
   - 输入内容会被清空

3. **视觉反馈**
   - 背景被半透明黑色遮罩，突出输入区域
   - 蒙层创造景深效果，引导用户注意力
   - 平滑的动画过渡，避免突兀感

## ✅ 测试建议

1. **功能测试**
   - [ ] 点击回复按钮，输入框正常显示
   - [ ] 点击蒙层，输入框正常关闭
   - [ ] 发送内容后，输入框自动关闭
   - [ ] 编辑一句话/岗位时，输入框正常显示
   - [ ] 黑色蒙层透明度符合预期

2. **兼容性测试**
   - [ ] iOS Safari 浏览器
   - [ ] Android Chrome 浏览器
   - [ ] 微信内置浏览器
   - [ ] 不同屏幕尺寸适配

3. **性能测试**
   - [ ] 动画流畅，无卡顿
   - [ ] 多次打开/关闭无内存泄漏

## 📱 适配说明

- 自动适配安全区域（iPhone 刘海屏等）
- 支持软键盘弹出时的布局调整
- 响应式设计，适配不同屏幕尺寸

## 🔧 维护建议

如需调整蒙层样式，修改以下参数：

1. **透明度**：修改 `rgba(0, 0, 0, 0.7)` 中的第四个参数（0-1 之间）
2. **颜色**：修改 `rgba` 前三个参数
3. **动画时间**：修改 `animation: fadeIn 0.3s` 中的时间值

---

**修改日期**: 2025-11-11  
**修改内容**: 为回答问题、修改一句话、修改岗位等输入框添加黑色蒙层效果


